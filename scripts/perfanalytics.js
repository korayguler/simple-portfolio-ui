'use strict';var API_URL='https://perfanalytics--api.herokuapp.com/metrics',toSecond=function(a){return(a/1e3).toFixed(4)};window.onload=function(){if('performance'in window){var a=performance,b=a.timing,c=toSecond(performance.getEntriesByType('paint')[0].startTime),d=toSecond(b.responseStart-b.requestStart),e=toSecond(b.domContentLoadedEventEnd-b.navigationStart),f=toSecond(new Date-b.navigationStart),g=performance.getEntriesByType('resource').map(function(a){return{name:a.name,file_type:a.initiatorType,response_end:toSecond(a.responseEnd)}}),h={site:window.location.hostname,url:window.location.href,fcp:c,ttfb:d,dom_load:e,window_load:f,files:g,generated_at:new Date(b.navigationStart).toString()};sendMetrics(h)}};var sendMetrics=function(a){fetch(API_URL,{method:'POST',headers:{"Content-Type":'application/json'},body:JSON.stringify(a)}).then(function(a){return a.json()}).then(function(a){console.log(a)}).catch(function(a){return console.log('ERROR: ',a)})};
